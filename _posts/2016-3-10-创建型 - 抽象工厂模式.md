---
layout: post
title: 创建型 - 抽象工厂模式
date:   2016-5-30
categories: "设计模式"
tags: [java, 设计模式]
author: Mark
comment: false
---

> 抽象工厂模式是工厂模式的升级版本，抽象工厂模式是对一组具有相同主题的工厂进行封装。

　　当一个抽象产品有多个具体子类的时候，比如抽象手机CPU，有高通骁龙，联发科两个实现。工厂角色怎么知道实例化哪一个子类？抽象工厂提供两个工厂角色，分别对应两个具体产品角色，每一个具体工厂只负责某一个产品角色的实例化，每一个具体工厂类只负责创建抽象产品的某一个具体子类的实现。

　　以小米手机为例，有红米和小米5两条生产线，生产这两种手机都需要摄像头和电池，但如何确定何时创建小米5的摄像头，何时创建红米摄像头？这时需要各自的工厂类创建各自的部件，代码如下：

``` java
// 摄像头抽象类
public abstract class Camera {
}

// 小米5摄像头
public class XiaoMi5Camera extends Camera {
    public XiaoMi5Camera() {
        System.out.println("这是小米5摄像头。。。");
    }
}

// 红米摄像头
public class RedMiCamera extends Camera {
    public RedMiCamera() {
        System.out.println("这是红米摄像头。。。");
    }
}
```
``` java
// 电池基类
public abstract class Battery {
}

// 小米5电池
public class XiaoMi5Battery extends Battery {
    public XiaoMi5Battery() {
        System.out.println("小米5电池，3000毫安");
    }
}

// 红米电池
public class RedMiBattery extends Battery {
    public RedMiBattery() {
        System.out.println("红米电池，2500毫安");
    }
}
```
``` java
// 抽象工厂
public interface IFactory {
    Camera createCamera();  // 创建相机
    Battery createBattery();     // 创建电池
}

// 小米5工厂
public class XiaoMi5Factory implements IFactory {
    public Camera createCamera() {
        return new XiaoMi5Camera();
    }

    public Battery createBattery() {
        return new XiaoMi5Battery();
    }
}

// 红米工厂
public class RedMiFactory implements IFactory {
    public Camera createCamera() {
        return new RedMiCamera();
    }

    public Battery createBattery() {
        return new RedMiBattery();
    }
}
```